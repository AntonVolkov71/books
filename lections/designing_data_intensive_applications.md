## Часть 1 Основы информационных система

### Высоконагруженные данными приложения - data intensive applications - DIA

### Высоконагруженные вычисления - compute intensive

### Надежность - reliability

### Масштабируемость - scalability

### Удобство сопровождения - maintainability

### Разработка состоит:

- **Надежность - reliability**
    - устойчивость к аппаратным и программным сбоям, человеческим факторам
    - способность выдержать ошибочные действия пользователя
    - предотвращать не санкционный доступ или неправильную эксплуатацию
    - работать нормально в случае проблем
- **Масштабируемость - scalability**
    - показатели нагрузки и производительности, время ожидания, процент или пропускная способность
- **Удобство сопровождения - maintainability**
    - удобство эксплуатации, простота и возможность развития

### Сбой vs Отказ

- сбой - fault
    - отклонение одного из компонентов системы от рабочих характеристик
- отказ - failure
    - система в целом прекращает предоставление сервиса
- > Предотвратить переход сбоев в отказ
- необходимо генерить сбои, чтобы добиться устойчивости - Хаос инжиниринг

#### Аппаратные сбои

- среднее время на отказ (mean time to failure, MTTF)
    - винчестер работает от 10 до 50 лет
        - если в кластере 10 000 винчестеров, примерно 1 отказ в день
        - решение - RAID массивы, дублирование и т.д.
- применять методы устойчивости чем избыточность аппаратного обеспечения

#### Программные сбои

- чтобы избежать, полезно:
    - всесторонние тесты
    - изоляция процессов
    - мониторинг
    - анализ поведения системы при эксплуатации
    - самопроверка внутри сервиса

#### Человеческий фактор

- ошибки в конфигурации операторами
- предоставить эксплуатации (операторам) песочницу для изучения и экспериментирования с системой
- тестирование на всех уровнях, автоматизированное тестирование с пограничными случаями
- обеспечить быстрое восстановление после выявления ошибок, откат конфигурации
- настроить явный мониторинг, метрики (телеметрия), что позволит определить на ранней стадии нарушения

### Нагрузка

- нагрузку можно описать параметрами нагрузки, например:
    - количество запросов в секунду
    - отношение операция чтения к записи в БД
    - количество активных клиентов в чате
- бывает, что чтение чаше записи, тогда при таком лучше сразу писать кеш при операции записи, чтобы при чтении не
  производить вычисления

### Описание Производительности

- как измениться производительность системы если увеличить нагрузку, а ресурсы системы не менять (CPU, RAM)
- насколько нужно увеличить ресурсы при увеличении нагрузки, чтобы производительность не уменьшалась

### Время ожидания vs Время отклика

- **время ожидания - latency**
    - длительность ожидания запроса обработки, время на протяжении которого ожидает обслуживания
- **время отклика - response time**
    - то, что видит клиент, помимо обработки запроса включает задержки сети, сообщений в очереди
    - Параметр времени отклика:
        - арифметическое среднее (не самое лучшее), типа среднее время запросов 400мс, хотя при этом может быть 200мс и
          5 секунд(что не допустимо)
        - процентили - среднее по разным показателям, например:
            - считаем в процентах запросы до 200мс и так далее, и выясняем соотношение этих групп, каких больше
            - 99% запросов менее 200мс, 1% больше секунды - на самом деле, 1% может быть самыми ценными запросами

### Принципы проектирования

- удобство эксплуатации - облегчение поддержки
- простота - облегчает понимание системы новыми инженерами
- возможность развития - упрощает внесение изменений в будущем, адаптация
    - расширяемость - extensibility
    - модифицируемость - modifiability
    - пластичность - plasticity

#### Удобство эксплуатации

- максимально автоматизировать, чтобы персонал отвечал только за:
    - мониторинг состояния системы и восстановления
    - выяснение причин проблем, отказов
    - поддержка актуального ПО
    - отслеживание влияния систем друг на друга
    - введение в эксплуатацию
    - перенос с одной системы на другую
    - поддержка безопасности

#### Простота

- для исключения побочной сложности - лучше инструкция абстракций. Хорошая абстракция позволяет скрыть большую часть
  реализации за фасадом
- многократное применение одного и того же хорошо

#### Agile

- паттерн рабочего процесса, обеспечивающий инфраструктуру адаптации к изменениям

#### TDD

- разработка через тестирование

#### Evolvability - возможность развития (адаптация на уровне информационных систем)

### Требования приложений:

- функциональные: хранение, извлечение, поиск, обработка
- нефункциональные: безопасность, надежность, соответствие нормативным документам, масштабируемость, удобство
  сопровождения

## Часть2 Модели данных и языки запросов

#### RDBMS

- relation database management system - реляционные системы управления базами данных

#### Система управления - Information Management System - IMS

### Иерархические модели:

- реляционная SQL
- сетевая модель "канула в лету"

### SQL

- декларативный язык запросов
- выполнить определенные операции в заданном порядке

### MapReduce

- модель программирования для обработки больших объектов данных блоками на множестве машин
- ни декларативный не императивный
- состоит из map и reduce - должны быть чистыми (pure), используются только передаваемые данные
- основан на JavaScript функции

### Графоподобные модели данных

- вершины - vertices, узлы - node, или сущности - entity, состоит:
    - состоит из идентификатора, множества исходящих и входящих ребер
- ребра - edge, связи - relationship, или дуги - arc, состоит:
    - уникальный идентификатор
    - вершина с которой начинается (начальная)
    - вершина которой оно заканчивается (конечная)

### Графовое хранилище:

- из 2 реляционных таблиц:
    - вершины
    - ребра

### Аспекты графового хранилища:

- любая вершина может быть соединена ребром с любой другой вершиной
- для любой вершины можно найти входящие, исходящие ребра, выполнить обход графа, найти путь по цепочке вершин
  в прямом и обратном направлениях
- в одном графе, задействуя разные виды связей можно хранить разные виды информации

#### Cypher

- декларативный язык запросов для графовых БД

### Тройные кортеж

- [ субъект, предикат, объект] - (lucy, age, 33)
- субъект
    - эквивалентен вершине графа
- объект
    - представляет одну из 2 вещей:
        - Значения простого типа данных (строка, число). При этом предикат и объект эквивалентны ключу и значению
          свойства
          вершины объекта. Вершина Lucy со свойствами {age: 33}
        - Другую вершину графа. Предикат здесь ребро графа, субъект начальная вершина, объект конечная вершина
            - Lucy, marriedTo, alain

#### SPARQL

- язык запросов для хранилищ тройных кортежей, использующих модель данных RDF (protocol and RDF Query Language)

### Фундамент datalog

- модель данных аналогична модели хранилищ тройных кортежей
    - пример, name (usa, "United States").type(usa, country)
    - правило работает если системе удается найти соответствие для всех предикатов справа от оператора
    - запрос, recursive(location, Name) :- name (Location, Name)
- используется в Datomic
- синтаксис S-выражений
- похож на Prolog
- слова с большой буквы это переменные

### Нереляционные. NoSQL

- отсутствие обязательной схемы для хранения данных
    - Документированные - данные в виде отдельных документов, связи между ни редкие
    - Графовые (MongoDB) - предназначены для сценариев, в которых данные могут быть связаны

## Часть 3 Подсистемы хранения и извлечения данных

```
  Если вы поддреживаете в вещах порядок, значит вы просто слишком ленивы, чтобы их искать
```